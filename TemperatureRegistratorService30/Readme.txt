Программа управления контроллером выстрела-свидетеля

Р У К О В О Д С Т В О   П О Л Ь З О В А Т Е Л Я

1. Начало работы с программой

А. Установка связи с контроллером
	Выберите последовательный порт для связи. Для этого на панели "Связь" 
кликните левой кнопкой мыши по управляющей стрелке выпадающего списка.
В открывшемся списке установите указатель курсора на активный элемент и 
кликните по нему левой кнопкой мыши. На панели "Монитор последовательного 
порта" сначала появляется подсказка "Select serial port in ComboBox", а 
после удачного выбора порта появляется сообщение 
"Serial port <выбранный номер порта> created...". Если такое сообщение не 
появляется, закройте программу управления контроллером выстрела-свидетеля,
затем закройте все программы, которые используют в работе последовательные 
порты и вновь запустите программу управления контроллером выстрела-свидетеля.

Б. Подготовка к процессу измерений
	Для хранения информации после отключения питания в контроллере 
выстрела-свидетеля (в дальнейшем - контроллер) предусмотрена flash-память. 
Конструктивно flash-память имеет страничный способ записи и чтения информации.
Это означает, что чтение и запись информации во flash-память осуществляется 
блоками по 256 байт. Всё доступное пространство flash-памяти разбито 
на 32 сектора по 64 Кбайт. Каждый сектор разбит на два блока по 32 Кбайта.
Каждый сектор размером 32 Кбайта разбит на 8 блоков размером 4 Кбайта.
Каждый блок размером 4 Кбайта в свою очередь разбит на 16 страниц по 256 байт.
Для корректной записи во flash-память её необходимо предварительно очистить 
(записать во все ячейки значение 0xff).
В данной программе стирание памяти происходит секторами размером 64 Кбайт.
Всего таких секторов 32 штуки, они пронумерованы от 0 до 31. Для стирания 
нужного сектора на панели "Карта памяти" кликните по индикатору с 
соответствующим номером. Таким образом выбирается начальный адрес сектора 
для стирания. После этого нажмите кнопку ОЧИСТКА на панели "Карта памяти". 
На панели "Монитор последовательного порта" наблюдайте информацию о процессе 
стирания данных.

В. Выполнение измерений
	Управление процессом измерений осуществляется на панели "Измерение". Измерения
могут проводиться в двух режимах: одиночном и автоматическом.
	В одиночном режиме по команде оператора производится однократное снятие 
данных с датчика. Для этого необходимо выбрать номер канала (от 1 до 12) путём
установки указателя мыши на управляющем элементе панели "Канал" и клика левой 
кнопки мыши, затем нужно установить указатель мыши на клавишу "Измерить" и 
кликнуть левой кнопкой мыши. На панели "Монитор последовательного порта" появится 
информация о величине сигнала на выбранном канале. Запись информации во flash-память
в этом режиме не производится.
	В автоматическом режиме снятие данных производится с каждого канала 
последовательно, начиная с первого и заканчивая двенадцатым каждые 100 мс. Данные 
записываются во flash-память, сначала младший, а затем старший байты. Одна 
такая запись, хранящая данные по одному измерению в данный момент времени называется
кортежем. Длина кортежа 24 байта. Кортежи генерируются каждые 100 мс и хранятся во
flash-памяти последовательно.
	Процесс измерения в автоматическом режиме может находиться в следующих состояниях:
- УДЕРЖАНИЕ;
- РАБОТА;
- ОСТАНОВ.
	Процесс измерения происходит во времени, которое на уровне контроллера представлено
двумя счётчиками: счётчик реального времени и счётчик рабочего времени. Счётчик 
реального времени сбрасывается в 0 при включении контроллера и далее увеличивается на 1 
каждые 100 мс. Оператор не может программно управлять состоянием этого счётчика. Счётчик 
рабочего времени сбрасывается в 0 при включении контроллера или при получении команды 
"СБРОС" (кнопка с одноимённым названием на панели "Измерение").
	После включения контроллера процесс измерения в автоматическом режиме находится 
в состоянии "УДЕРЖАНИЕ". В этом состоянии измерения не производятся, запись во 
flash-память не происходит. Процесс измерения в автоматическом режиме выходит из 
этого состояния при получении команды "СТАРТ" (кнопка с одноимённым названием на панели 
"Измерение"). Процесс измерения в автоматическом режиме возвращается в это состояние 
при получении команды "СТОП" (кнопка с одноимённым названием на панели "Измерение").
Состояние "УДЕРЖАНИЕ" соответствует паузе в процессе измерения, поэтому при повторном
получении команды "СТАРТ" процесс автоматического измерения продолжается с того
значения счётчика рабочего времени, на котором был остановлен командой "СТОП".
	Процесс автоматического измерения имеет ограничение по длительности и автоматически
завершается по истечению 1 часа (36000 отсчётов рабочего времени). После  
автоматического завершения процесс автоматического измерения переход в состояние 
"ОСТАНОВ". Вывести его из этого состояния можно только выключением контроллера.
Данная мера предосторожности связана с защитой от случайной перезаписи результатов 
измерения.
	Для получения информации о состоянии процесса автоматического измерения служит
команда "СОСТОЯНИЕ" (кнопка с одноимённым названием на панели "Измерение"). Результат
выполнения этой команды выводится на панели "Монитор последовательного порта".

Г. Считывание результатов измерений

В данной программе чтение результатов измерений происходит секторами размером 64 Кбайт.
Всего таких секторов 32 штуки, они пронумерованы от 0 до 31. Для чтения нужного сектора 
на панели "Карта памяти" кликните по индикатору с соответствующим номером. Таким образом 
выбирается начальный адрес сектора для чтения. После этого нажмите кнопку ЧТЕНИЕ на панели 
"Карта памяти". На панели "Монитор последовательного порта" наблюдайте информацию о 
процессе чтения данных. После завершения процесса чтения нажмите кнопку "Сохранить" на 
панели "Монитор последовательного порта".
	
 	

  